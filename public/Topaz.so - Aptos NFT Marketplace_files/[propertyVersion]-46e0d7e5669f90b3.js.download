(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9089],{52365:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(18764),i=r(85893);function s(e){var t=e.title,r=e.children,s=e.loading,a=void 0!==s&&s,c=e.width,o=void 0===c?"150px":c;return(0,i.jsxs)("div",{className:"w-[".concat(o,"] flex h-full flex-col items-start items-center justify-start rounded-lg border-2 border-gray-300 px-3 py-2 dark:border-stone-700 md:w-auto md:gap-2"),children:[(0,i.jsx)("div",{className:"text-center text-xs text-gray-500 dark:text-stone-500",children:t}),(0,i.jsx)("div",{className:"flex flex-row items-center justify-center gap-2 pt-2 text-center text-sm dark:text-stone-300 md:pt-0",children:r&&!a?r:(0,i.jsx)("div",{children:(0,i.jsx)(n.i_,{width:64,height:20})})})]})}},21905:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(98130),i=r(85893);function s(e){var t=e.date,r=e.full,s=void 0!==r&&r,a=e.children;return(0,i.jsx)(n.ZP,{date:t,renderer:function(e){var t=e.days,r=e.hours,n=e.minutes,c=e.seconds;return e.completed?a:s?(0,i.jsxs)("span",{children:[t>0&&"".concat(t," day(s),")," ",r>0&&"".concat(r," hour(s),")," ",n>0&&"".concat(n," min(s), ")," ",c," sec(s)"]}):(0,i.jsxs)("span",{children:[t>0&&"".concat(t,"d")," ",r>0&&"".concat(r,"h")," ",n>0&&"".concat(n,"m")," ",c,"s"]})}})}},49603:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(50029),i=r(87794),s=r.n(i),a=r(67294),c=r(97803),o=r(18764),l=r(85893);function d(e){var t=e.address,r=e.shorten,i=void 0===r||r,d=(e.large,(0,a.useState)()),u=d[0],x=d[1];return(0,a.useEffect)((function(){(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,(0,c.hc)(t,i);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]),u?(0,l.jsx)(l.Fragment,{children:u}):(0,l.jsx)("span",{children:(0,l.jsx)(o.i_,{height:20,width:120})})}},37132:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(85893),i="flex flex-row justify-center items-center gap-2 rounded-lg border-2 border-gray-200 px-4 py-2 text-sm w-full md:w-auto whitespace-nowrap dark:border-stone-600 dark:hover:bg-stone-600",s={yellow:"flex flex-row justify-center gap-2 items-center rounded-lg border-2 border-[#FFE32B] px-3 py-1 text-xs hover:bg-[#FFE32B] hover:cursor-pointer text-black dark:bg-stone-700 dark:text-stone-300 dark:border-fuchsia-700",disabled:"".concat(i," bg-gray-100 hover:cursor-not-allowed"),small:"flex flex-row justify-center gap-2 items-center rounded-lg border-2 border-gray-200 px-3 py-1 text-xs hover:bg-gray-200 hover:cursor-pointer dark:border-stone-600"};function a(e){var t=e.children,r=e.onClick,a=e.variant,c=e.className,o=void 0===c?"":c;return(0,n.jsx)("div",{onClick:r,className:"".concat(s[a]||"".concat(i," hover:cursor-pointer hover:bg-gray-200")," ").concat(o),children:t})}},44819:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var n=r(16835),i=r(59499),s=r(50029),a=r(87794),c=r.n(a),o=r(51374),l=r(41664),d=r.n(l),u=r(11163),x=r(67294),p=r(23321),f=r(7200),h=r(87536),m=r(86501),v=r(38938),y=r(97803),j=r(81831),b=r(33771),g=r(66799),w=r(52365),k=r(82422),N=r(97709),_=r(37132),Z=r(21905),P=r(49603),O=r(64289),C=r(6060),S=r(44678),T=r(79814),A=r(18764),E=r(16208),L=r(56204),F=r(16485),R=r(85893);function B(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw s}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=new Set(["BuyEvent","ListEvent","DelistEvent","FillCollectionBidEvent","SellEvent"]);function z(e){var t=e.tokens;return(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"ml-4 mb-4 text-left text-lg text-gray-400 dark:text-stone-400 md:text-xl",children:"More from this collection"}),!t&&(0,R.jsx)(A.JF,{}),t&&(0,R.jsx)("section",{className:"mx-auto grid max-w-screen-xl grid-cols-2 gap-1 px-2 md:grid-cols-4 md:gap-2 lg:grid-cols-5",children:t.map((function(e){return(0,R.jsx)(E.Z,{tokenId:e.token_id,uri:e.preview_uri||e.token_uri,slug:e.collection_slug,name:e.token_name,price:e.price},e.token_id)}))})]})}function U(e){var t=e.title,r=e.empty,n=e.rows;return(0,R.jsxs)("div",{className:"rounded-lg border-2 border-gray-200 text-gray-400 dark:border-stone-700 dark:text-stone-400",children:[(0,R.jsx)("div",{className:"border-b-2 py-3 pl-6 dark:border-stone-700",children:t}),(0,R.jsxs)("ul",{role:"list",className:"max-h-[230px] divide-y divide-y-2 divide-gray-200 overflow-scroll dark:divide-stone-700",children:[!n&&[1].map((function(e){return(0,R.jsxs)("li",{className:"mx-auto flex flex-col justify-center gap-2 py-2 px-4",children:[(0,R.jsx)(A.i_,{width:280,height:24}),(0,R.jsx)(A.i_,{width:230,height:24})]},e)})),n&&0===n.length&&(0,R.jsx)("div",{className:"py-4 px-6",children:r}),null===n||void 0===n?void 0:n.map((function(e,t){return(0,R.jsxs)("li",{className:"py-4 px-6 text-sm",children:[(0,R.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,R.jsx)("div",{children:e.topLeft}),(0,R.jsx)("div",{children:e.topRight})]}),(0,R.jsxs)("div",{className:"flex flex-row items-center justify-between pt-2",children:[(0,R.jsx)("div",{children:e.bottomLeft}),(0,R.jsx)("div",{children:e.bottomRight})]})]},t)}))]})]})}function W(e){var t=e.token,r=e.owner,n=(e.listing,e.loading),i=e.handleBuy,a=e.isClaimable,o=e.bestOffer,l=e.loadingOwner,d=e.refresh,u=(0,F.Z)(),x=(u.account,u.address),f=(0,L.I)(),v=f.claimToken,j=f.listToken,w=f.bidToken,k=f.acceptBid,_=f.delistToken,Z=f.editListing,P=(0,h.cI)(),O=P.register,C=P.getValues,S=(0,b.Z)();function T(e){return E.apply(this,arguments)}function E(){return E=(0,s.Z)(c().mark((function e(t){var r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C("listPrice"),n=t.token_name,i=t.property_version,!((0,y.vz)(r)<=0)){e.next=5;break}return m.ZP.error("List price must be more than 0 APT."),e.abrupt("return");case 5:return e.abrupt("return",j((0,y.vz)(r),1,(0,y.UQ)(t.collection_id),(0,y.iR)(t.collection_id),n,Number(i)||0,d));case 6:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function B(e){return D.apply(this,arguments)}function D(){return D=(0,s.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S({body:(0,R.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,R.jsx)("div",{className:"text-sm text-gray-400 dark:text-stone-400",children:"Listing your item removes it from your wallet. You can delist anytime to get it back."}),(0,R.jsx)("div",{className:"text-xl",children:"Price"}),(0,R.jsx)("input",H({placeholder:"10 APT",type:"number",id:"listPrice",className:"w-full rounded-xl border-2 border-gray-300 bg-transparent text-left text-xl placeholder:text-gray-300 dark:border-stone-700 dark:placeholder:text-stone-500",style:{WebkitAppearance:"none",MozAppearance:"textfield"}},O("listPrice")))]}),maxWidth:"max-w-md",title:"List Item",submitButtonText:"List Now",catchOnCancel:!0}).then((function(){return T(t)})).catch((function(e){return console.log("reject",e)}));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function I(){return I=(0,s.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){return(n=(0,s.Z)(c().mark((function e(){var r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C("editListPrice"),n=t.token_name,i=t.property_version,!((0,y.vz)(r)<=0)){e.next=5;break}return m.ZP.error("List price must be more than 0 APT."),e.abrupt("return");case 5:return e.abrupt("return",Z((0,y.vz)(r),1,(0,y.UQ)(t.collection_id),(0,y.iR)(t.collection_id),n,Number(i)||0,d));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(){return n.apply(this,arguments)},S({body:(0,R.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,R.jsx)("div",{className:"text-xl",children:"New Price"}),(0,R.jsx)("input",H({placeholder:"10 APT",type:"number",id:"editListPrice",className:"placeholder:text-graydark:placeholder:text-stone-500 w-full rounded-xl border-2 border-gray-300 bg-transparent text-left text-xl  dark:border-stone-700",style:{WebkitAppearance:"none",MozAppearance:"textfield"}},O("editListPrice")))]}),maxWidth:"max-w-md",title:"Edit Listing",submitButtonText:"Submit",catchOnCancel:!0}).then((function(){return r(t)})).catch((function(e){return console.log("reject",e)}));case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function M(){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v((0,y.UQ)(t.collection_id),(0,y.iR)(t.collection_id),t.token_name,Number(t.property_version),d);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return W.apply(this,arguments)}function W(){return(W=(0,s.Z)(c().mark((function e(){var r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C("bidPrice"),n=C("expiration"),i=1e3*(new Date).getTime(),e.next=5,w(36e8*Number(n)+i,(0,y.vz)(r),1,(0,y.UQ)(t.collection_id),(0,y.iR)(t.collection_id),t.token_name,Number(t.property_version),d);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S({body:(0,R.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,R.jsx)("div",{className:"text-sm text-gray-400 dark:text-stone-400",children:"Placing an offer removes coins from your wallet. You can cancel your offer anytime to get your coins back."}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"mb-4 text-xl",children:"Price"}),(0,R.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,R.jsx)("input",H({placeholder:"100",type:"number",id:"bidPrice",className:"w-full rounded-xl border-2 border-gray-300 bg-transparent text-left text-xl placeholder:text-gray-300 dark:border-stone-700 dark:placeholder:text-stone-500",style:{WebkitAppearance:"none",MozAppearance:"textfield"}},O("bidPrice"))),(0,R.jsx)("div",{className:"-mb-3 -mr-2 h-10 w-10",children:(0,R.jsx)(g.Z,{})}),(0,R.jsx)("div",{className:"text-xl",children:"APT"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"mb-4 text-xl",children:"Offer expiration"}),(0,R.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,R.jsx)("input",H({placeholder:"24",type:"text",id:"expiration",className:"w-full rounded-xl border-2 border-gray-300 bg-transparent bg-transparent text-left text-xl placeholder:text-gray-300 dark:border-stone-700",style:{WebkitAppearance:"none",MozAppearance:"textfield"},defaultValue:48},O("expiration"))),(0,R.jsx)("select",{className:"rounded-xl border-2 border-gray-300 bg-transparent text-xl dark:border-stone-700",name:"unit",id:"unit",children:(0,R.jsx)("option",{value:"hours",children:"Hours"})})]})]})]}),maxWidth:"max-w-md",title:"Place Offer",submitButtonText:"Create Offer",catchOnCancel:!0}).then((function(){x?U():m.ZP.error("Please connect your wallet.")})).catch((function(e){return console.log("reject",e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=(0,s.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(Number(t.bid_id),Number(t.amount),d);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_(1,(0,y.UQ)(t.collection_id),(0,y.iR)(t.collection_id),t.token_name,Number(t.property_version)||0,d));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return 0===e.royalty_points_denominator?"0%":"".concat((e.royalty_points_numerator/e.royalty_points_denominator*100||0).toLocaleString(void 0,{maximumFractionDigits:2}),"%")}return(0,R.jsxs)("div",{className:"inline-block w-full rounded-lg border-2 p-4 dark:border-stone-700 md:px-6",children:[(!t||n||l)&&(0,R.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,R.jsx)(A.i_,{width:200,height:24}),(0,R.jsx)(A.i_,{width:280,height:48}),(0,R.jsx)(A.i_,{width:200,height:48})]}),!(!t||n||l)&&(0,R.jsx)("div",{className:"flex flex-col gap-5",children:function(){if(t&&!n)return a?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"flex flex-row gap-3 text-gray-400 dark:text-stone-400",children:[(0,R.jsx)(p.Z,{className:"h-6 w-6"})," Your Inbox"]}),(0,R.jsx)(N.Z,{onClick:M,children:"Claim"})]}):t.is_listed?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"text-gray-400 dark:text-stone-400",children:"Current Price"}),(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 text-xl font-medium md:gap-4 md:text-3xl",children:[(0,R.jsx)("div",{className:"w-5 md:w-7",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(t.price)," APT"]})]}),(0,R.jsx)("div",{children:x&&(null===t||void 0===t?void 0:t.seller)===x?(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:gap-4",children:[(0,R.jsx)(N.Z,{onClick:Y,children:"Delist"}),(0,R.jsx)(N.Z,{onClick:function(){return function(e){return I.apply(this,arguments)}(t)},children:"Edit Price"})]}),(0,R.jsx)("div",{className:"mt-4 text-xs text-gray-400 dark:text-stone-400",children:"Delist first to accept offers on this item."})]}):(0,R.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:gap-4",children:[(0,R.jsx)(N.Z,{onClick:i,children:"Buy Now"}),(0,R.jsx)(N.Z,{onClick:Q,children:"Make Offer"})]})}),(0,R.jsxs)("div",{className:"text-xs text-gray-400 dark:text-stone-400",children:[X(t)," Creator Royalty"]}),(0,R.jsx)("div",{className:"-mt-4 text-xs text-gray-400 dark:text-stone-400",children:"2.5% Marketplace Fee"})]}):o?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"text-gray-400 dark:text-stone-400",children:x&&o.buyer===x?"Your Offer":"Best Offer"}),(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 text-xl font-medium md:gap-4 md:text-3xl",children:[(0,R.jsx)("div",{className:"w-5 md:w-7",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(o.price)," APT"]})]}),(0,R.jsx)("div",{className:"flex flex-col gap-4 md:flex-row",children:x&&r===x?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N.Z,{onClick:function(){return function(e){return J.apply(this,arguments)}(o)},children:"Accept Offer"}),(0,R.jsx)(N.Z,{onClick:function(){return B(t)},children:"List Item"})]}):o.buyer===x?(0,R.jsx)(R.Fragment,{}):(0,R.jsx)(N.Z,{onClick:Q,children:"Make Offer"})}),(0,R.jsxs)("div",{className:"text-xs dark:text-stone-400",children:[X(t)," Creator Royalty"]}),(0,R.jsx)("div",{className:"-mt-4 text-xs text-gray-400 dark:text-stone-400",children:"2.5% Marketplace Fee"})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"text-gray-400 dark:text-stone-400",children:"Not Listed"}),(0,R.jsx)("div",{children:x&&r===x?(0,R.jsx)(N.Z,{onClick:function(){return B(t)},children:"List Item"}):(0,R.jsx)(N.Z,{onClick:Q,children:"Make Offer"})}),(0,R.jsxs)("div",{className:"text-xs dark:text-stone-400",children:[X(t)," Creator Royalty"]}),(0,R.jsx)("div",{className:"-mt-4 text-xs text-gray-400 dark:text-stone-400",children:"2.5% Marketplace Fee"})]})}()})]})}function Q(e){var t=e.collectionSlug,r=e.name,i=e.propertyVersion,a=(0,x.useState)(),l=a[0],u=a[1],p=(0,x.useState)(),N=p[0],E=p[1],D=(0,x.useState)(),I=D[0],Q=D[1],V=(0,x.useState)(),J=V[0],Y=V[1],q=(0,x.useState)(),X=q[0],G=q[1],$=(0,x.useState)(!0),K=($[0],$[1],(0,x.useState)(!1)),ee=K[0],te=K[1],re=(0,x.useState)(!0),ne=re[0],ie=re[1],se=(0,x.useState)(),ae=se[0],ce=se[1],oe=(0,x.useState)(),le=oe[0],de=oe[1],ue=(0,x.useState)(),xe=ue[0],pe=ue[1],fe=(0,x.useState)(),he=fe[0],me=fe[1],ve=(0,x.useState)(),ye=ve[0],je=ve[1],be=(0,x.useState)(),ge=be[0],we=be[1],ke=(0,x.useState)(!1),Ne=ke[0],_e=ke[1],Ze=(0,F.Z)(),Pe=Ze.account,Oe=Ze.address,Ce=(0,L.I)(),Se=Ce.buyToken,Te=Ce.offerToken,Ae=Ce.acceptCollectionBid,Ee=Ce.cancelCollectionBid,Le=Ce.acceptBid,Fe=Ce.cancelBid,Re=(0,h.cI)(),Be=Re.register,De=Re.getValues,Ie=(0,b.Z)();function He(){return(He=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe){e.next=3;break}return m.ZP.error("Please connect your wallet."),e.abrupt("return");case 3:return e.abrupt("return",Se(le,Number(J.price),1,(0,y.UQ)(J.collection_id),(0,y.iR)(J.collection_id),J.token_name,Number(J.property_version)||0,Ve));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return ze.apply(this,arguments)}function ze(){return(ze=(0,s.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=De("receiver"),e.abrupt("return",Te(t,1,(0,y.UQ)(J.collection_id),(0,y.iR)(J.collection_id),J.token_name,Number(J.property_version),Ve));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return(Ue=(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ie({body:(0,R.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"mb-4 text-xl",children:"Receiver Address"}),(0,R.jsx)("input",H({placeholder:"0x1234...abcdef",type:"text",id:"receiver",className:"w-full rounded-xl border-2 border-gray-300 bg-transparent text-left text-xl placeholder:text-gray-300 dark:border-stone-700 dark:placeholder:text-stone-600",style:{WebkitAppearance:"none",MozAppearance:"textfield"}},Be("receiver")))]}),(0,R.jsx)("div",{className:"text-sm text-gray-400 dark:text-stone-400",children:"The recipient will receive this item in their Topaz Inbox, under Profile > Inbox tab. The item will NOT show up in their wallet until they claim it from their inbox."})]}),maxWidth:"max-w-md",title:"Send Token",submitButtonText:"Send Now",catchOnCancel:!0}).then((function(){return Me()})).catch((function(e){return console.log("reject",e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,s.Z)(c().mark((function e(){var t,r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oe){e.next=3;break}return te(!1),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,j.Z.from("inboxes").select("*").match({receiver:Oe}).gt("amount",0);case 6:t=e.sent,r=t.data,t.error,n=B(r),e.prev=10,n.s();case 12:if((i=n.n()).done){e.next=19;break}if(i.value.token_id!==J.token_id){e.next=17;break}return te(!0),e.abrupt("return",!0);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(3),console.log(e.t1);case 32:return te(!1),e.abrupt("return",!1);case 34:case"end":return e.stop()}}),e,null,[[3,29],[10,21,24,27]])})))).apply(this,arguments)}function Ve(){if(t&&r){var e=function(){var e=(0,s.Z)(c().mark((function e(){var n,a,o,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/asset-view",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({property_version:Number(i)||0,collection_slug:t,token_name:r})});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,o=a.data,(l=a.error)?console.log(l):console.log(o),o.owner=o.owner||o.seller,Y(o),e.next=14,Promise.all([(0,s.Z)(c().mark((function e(){var t,r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/token-data",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({token_id:o.token_id})});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.data,(i=r.error)&&console.log(i),Y(H(H({},o),(0,y.HO)(n)));case 10:case"end":return e.stop()}}),e)})))(),(0,s.Z)(c().mark((function e(){var t,r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/market-events",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({token_id:o.token_id})});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.data,(i=r.error)&&console.log(i),u(n);case 10:case"end":return e.stop()}}),e)})))(),(0,s.Z)(c().mark((function e(){var t,r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/floor",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({collection_id:o.collection_id})});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,n=r.data,(i=r.error)?(console.log(i),E(0)):E(n.floor),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E(void 0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()]);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();e()}}function Je(){var e=["https://cloudflare-ipfs.com/ipfs/","https://gateway.ipfs.io/ipfs/","https://dweb.link/ipfs/"];return e[Math.floor(Math.random()*e.length)]}function Ye(e){return qe.apply(this,arguments)}function qe(){return(qe=(0,s.Z)(c().mark((function e(t){var r,n,i,s,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.startsWith("ipfs://")&&(t=t.replace("ipfs://",Je())),e.prev=1,e.next=4,fetch(t);case 4:if(r=e.sent,!(null!==(n=r.headers.get("Content-Type"))&&void 0!==n&&n.includes("application/json")||null!==n&&void 0!==n&&n.includes("text/plain"))){e.next=11;break}return e.next=9,r.json();case 9:return i=e.sent,e.abrupt("return",i.attributes.map((function(e){return{key:e.trait_type,value:e.value}})));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("Fetch failed with cors");case 16:return e.prev=16,e.next=19,fetch(t,{mode:"no-cors"});case 19:if(s=e.sent,!(null!==(a=s.headers.get("Content-Type"))&&void 0!==a&&a.includes("application/json")||null!==a&&void 0!==a&&a.includes("text/plain"))){e.next=26;break}return e.next=24,s.json();case 24:return o=e.sent,e.abrupt("return",o.attributes.map((function(e){return{key:e.trait_type,value:e.value}})));case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(16),console.log("Fetch failed with no-cors");case 31:case"end":return e.stop()}}),e,null,[[1,13],[16,28]])})))).apply(this,arguments)}return(0,x.useEffect)((function(){J&&(0,s.Z)(c().mark((function e(){var t,r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/supply?collection_id=".concat(J.collection_id));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.count,r.error,Q(n);case 9:case"end":return e.stop()}}),e)})))()}),[J]),(0,x.useEffect)((function(){return Ve()}),[t,r]),(0,x.useEffect)((function(){J&&Promise.all([(0,s.Z)(c().mark((function e(){var t,r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.hZ)({token_data_id:{creator:(0,y.UQ)(J.collection_id),collection:(0,y.iR)(J.collection_id),name:J.token_name},property_version:Number(J.property_version||0).toString()});case 3:return t=e.sent,e.next=6,Promise.all(t.map(function(){var e=(0,s.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",(0,v.ut)(t));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return");case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()));case 6:r=e.sent,n=1e3*(new Date).getTime(),r=r.filter((function(e){return e.deadline>n})).sort((function(e,t){return Number(t.price)-Number(e.price)})),me(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),me([]);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()])}),[J]),(0,x.useEffect)((function(){(0,s.Z)(c().mark((function e(){var t,r,n,i,s,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/collection-metadata?collection_id=".concat(J.collection_id));case 4:return e.next=6,e.sent.json();case 6:return t=e.sent,r=t.data,n=J.property_keys,i=J.property_values,s=(null===n||void 0===n?void 0:n.map((function(e,t){return{key:e,value:i[t]}})))||[],e.next=13,Ye(J.token_uri);case 13:a=e.sent,o=(o=a||s).map((function(e){var t,n,i;return H({percent:((null===r||void 0===r||null===(t=r.metadata)||void 0===t||null===(n=t[e.key])||void 0===n||null===(i=n.values)||void 0===i?void 0:i[e.value])/I*100).toLocaleString(void 0,{maximumFractionDigits:2})},e)})),we(o);case 17:case"end":return e.stop()}}),e)})))()}),[J,I]),(0,x.useEffect)((function(){J&&(0,s.Z)(c().mark((function e(){var t,r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.Lu)({creator:(0,y.UQ)(J.collection_id),collection:(0,y.iR)(J.collection_id)});case 3:return t=e.sent,e.next=6,Promise.all(t.map(function(){var e=(0,s.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",(0,v.zm)(t));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return");case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()));case 6:r=e.sent,n=1e3*(new Date).getTime(),r=r.filter((function(e){return e.deadline>n})).sort((function(e,t){return Number(t.price)-Number(e.price)})).slice(0,6),je(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),je([]);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}),[J]),(0,x.useEffect)((function(){J&&(0,s.Z)(c().mark((function e(){var t,r,i,a,o,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,Promise.all([(0,s.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))(),We()]);case 3:return t=e.sent,r=(0,n.Z)(t,2),r[0],i=r[1],e.next=9,j.Z.from("ownerships").select("*").match({token_id:J.token_id}).gt("amount",0).limit(1).single();case 9:if(a=e.sent,o=a.data,(l=a.error)&&console.log(l),d=null,null!==o&&void 0!==o&&o.owner?(d=o.owner,pe((0,y.f0)(d)),_e(!1)):i?(d=Oe,pe(null),_e(!1)):null!==J&&void 0!==J&&J.seller?(d=J.seller,pe(null),_e(!1)):_e(!0),de((0,y.f0)(d)),!d){e.next=20;break}return e.next=19,(0,y.hc)(d);case 19:d=e.sent;case 20:ce(d),ie(!1);case 22:case"end":return e.stop()}}),e)})))()}),[J,Pe]),(0,x.useEffect)((function(){if(J){var e=function(){var e=(0,s.Z)(c().mark((function e(){var t,r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/collection-more",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({collection_id:J.collection_id})});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.data,r.error,G(n||[]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[J]),(0,R.jsxs)(O.Z,{children:[(0,R.jsx)(T.Z,{image:(0,y.Fl)((null===J||void 0===J?void 0:J.preview_uri)||(null===J||void 0===J?void 0:J.token_uri))}),(0,R.jsxs)("section",{className:"mx-auto flex max-w-screen-xl flex-col gap-8 py-8 px-4 md:py-16 md:px-8",children:[(0,R.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:gap-16",children:[(0,R.jsxs)("div",{className:"flex flex-col gap-4 md:w-[45%]",children:[(0,R.jsxs)("div",{className:"flex aspect-square flex-row items-center justify-center overflow-hidden rounded-lg border border-gray-300 dark:border-stone-700",children:[J&&(0,R.jsx)(C.q,{className:"aspect-square object-contain",uri:(null===J||void 0===J?void 0:J.preview_uri)||(null===J||void 0===J?void 0:J.token_uri),alt:"",w:756}),!J&&(0,R.jsx)("div",{children:(0,R.jsx)(A.i_,{width:600,height:600})})]}),(0,R.jsxs)("div",{className:"border-gray-207 rounded-lg border-2 px-6 py-4 text-gray-400 dark:border-stone-700 dark:text-stone-400",children:[(0,R.jsxs)("div",{className:"mb-4 flex flex-row items-center",children:[(0,R.jsx)("div",{children:"Item Properties"}),(0,R.jsx)("div",{className:"grow"}),null!==(null===J||void 0===J?void 0:J.rank)&&void 0!==(null===J||void 0===J?void 0:J.rank)&&I&&(0,R.jsx)(S.JR,{rank:(null===J||void 0===J?void 0:J.rank)+1,totalSupply:I})]}),(0,R.jsx)("div",{className:"grid grid-cols-2 items-start gap-2 md:grid-cols-3",children:null===ge||void 0===ge?void 0:ge.map((function(e,t){return(0,R.jsx)(w.Z,{title:e.key,children:function(){if("string"===typeof e.value&&e.value.startsWith("0x")){var t=new o.i8(e.value).toUint8Array(),r=(new TextDecoder).decode(t);return e.percent&&!isNaN(e.percent)?(0,R.jsxs)("div",{children:[r," ",(0,R.jsxs)("div",{className:"text-center text-xs opacity-100 dark:opacity-40",children:["(",e.percent,"%)"]})]}):r}return e.percent&&!isNaN(e.percent)?(0,R.jsxs)("div",{children:[e.value," ",(0,R.jsxs)("div",{className:"text-center text-xs opacity-100 dark:opacity-40",children:["(",e.percent,"%)"]})]}):e.value}()},t)}))}),ge&&0===ge.length&&"This item has no properties."]})]}),(0,R.jsxs)("div",{className:"flex grow flex-col",children:[(0,R.jsxs)("div",{className:"flex flex-row items-center",children:[(0,R.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,R.jsx)(d(),{href:"/collection/".concat(null===J||void 0===J?void 0:J.collection_slug),children:(0,R.jsx)("a",{className:"text-gray-400 underline dark:text-stone-400",children:(null===J||void 0===J?void 0:J.verified_name)||(0,y.iR)(null===J||void 0===J?void 0:J.collection_id)||(0,R.jsx)(A.i_,{width:100,height:24})})}),(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 text-xs text-gray-400 dark:text-stone-400",children:[(0,R.jsx)("div",{children:"Floor Price"}),(0,R.jsx)("div",{className:"w-4 opacity-50",children:(0,R.jsx)(g.Z,{})}),(0,R.jsx)("div",{children:N||0===Number(N)?(0,y.Ho)(N,{fallback:"\u221e"}):(0,R.jsx)(A.i_,{width:50,height:16})})]})]}),Oe&&!ee&&!ne&&xe===Oe&&!(null!==J&&void 0!==J&&J.price)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"grow"}),(0,R.jsx)(k.Z,{onClick:function(){return Ue.apply(this,arguments)},children:(0,R.jsx)(f.Z,{className:"h-6 w-6"})})]})]}),(0,R.jsxs)("div",{className:"mt-8",children:[(0,R.jsx)("div",{className:"mb-4 text-3xl font-bold text-gray-800 dark:text-stone-300 md:text-5xl",children:(null===J||void 0===J?void 0:J.token_name)||(0,R.jsx)(A.i_,{width:300,height:54})}),!Ne&&ae&&(0,R.jsxs)("div",{className:"flex flex-row gap-1 text-xs text-gray-400 dark:text-stone-400",children:["Owned by"," ",(0,R.jsx)(d(),{href:"/u/".concat(le),children:(0,R.jsx)("a",{className:"underline",children:Oe&&le===Oe?"you":ae})})]}),!Ne&&!ae&&(0,R.jsx)(A.i_,{height:16,width:100})]}),(0,R.jsxs)("div",{className:"my-8 flex flex-col gap-4",children:[(0,R.jsx)(W,{bestOffer:null===he||void 0===he?void 0:he[0],token:J,owner:xe,listing:J,loading:!1,handleBuy:function(){return He.apply(this,arguments)},isClaimable:ee,loadingOwner:ne,refresh:Ve}),(0,R.jsx)(U,{title:"Offers",empty:"No offers",rows:null===he||void 0===he?void 0:he.map((function(e){return{topLeft:(0,R.jsx)(d(),{href:"/u/".concat(e.buyer),children:(0,R.jsx)("a",{className:"underline",children:Oe&&Oe===e.buyer?"Your offer":(0,R.jsx)(P.Z,{address:e.buyer})})}),topRight:(0,R.jsxs)("div",{children:["Expires in"," ",(0,R.jsx)(Z.Z,{date:new Date(Number(e.deadline)/1e3)})]}),bottomLeft:(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 whitespace-nowrap text-sm text-black dark:text-stone-400",children:[(0,R.jsx)("div",{className:"w-4",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(e.price)," APT"]})]}),bottomRight:(0,R.jsx)("div",{children:function(){if(Oe){if(e.buyer===Oe)return(0,R.jsx)(_.Z,{onClick:function(){return Fe(Number(e.bid_id),Ve)},variant:"small",children:"Cancel Offer"});if(xe===Oe&&!J.is_listed)return(0,R.jsx)(_.Z,{onClick:function(){return Le(e.bid_id,e.amount,Ve)},variant:"yellow",children:"Accept Offer"})}}()})}}))}),(0,R.jsx)(U,{title:"Collection Offers",empty:"No collection offers",rows:null===ye||void 0===ye?void 0:ye.map((function(e){return{topLeft:(0,R.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,R.jsx)(d(),{href:"/u/".concat(e.buyer),children:(0,R.jsx)("a",{className:"underline",children:e.buyer===Oe?"You (".concat((0,y.Xn)(e.buyer),")"):(0,R.jsx)(P.Z,{address:e.buyer})})})," ",(0,R.jsxs)("span",{className:"hidden md:inline-block",children:["offered for up to ",e.amount," item(s)"]})]}),topRight:(0,R.jsxs)("div",{children:["Expires in"," ",(0,R.jsx)(Z.Z,{date:new Date(Number(e.deadline)/1e3)})]}),bottomLeft:(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 whitespace-nowrap text-sm text-black dark:text-stone-400",children:[(0,R.jsx)("div",{className:"w-4",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(e.price)," APT per item"]})]}),bottomRight:(0,R.jsxs)("div",{children:[Oe&&xe===Oe&&Oe!==e.buyer&&!J.is_listed&&(0,R.jsx)(_.Z,{onClick:function(){return Ae(Number(e.bid_id),1,e.creator,e.collection_name,J.token_name,Number(J.property_version)||0,Ve)},variant:"yellow",children:"Accept Offer"}),Oe&&Oe===e.buyer&&(0,R.jsx)(_.Z,{onClick:function(){return Ee(Number(e.bid_id),Ve)},variant:"small",children:"Cancel Offer"})]})}}))}),(0,R.jsx)(U,{title:"Latest Activity",empty:"No activity yet",rows:null===l||void 0===l?void 0:l.filter((function(e){return M.has(e.type)})).map((function(e){var t={};return"BuyEvent"==e.type?t.bottomLeft=(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 whitespace-nowrap text-sm text-black dark:text-stone-400",children:[(0,R.jsx)(d(),{href:"/u/".concat(e.data.buyer),children:(0,R.jsx)("a",{className:"underline",children:(0,R.jsx)(P.Z,{address:e.data.buyer})})}),(0,R.jsx)("div",{children:"bought for"}),(0,R.jsx)("div",{className:"w-4",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(e.data.price)," APT"]})]}):"ListEvent"==e.type?t.bottomLeft=(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 whitespace-nowrap text-sm text-black dark:text-stone-400",children:[(0,R.jsx)("div",{children:"Listed for"}),(0,R.jsx)("div",{className:"w-4",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(e.data.price)," APT"]})]}):"DelistEvent"==e.type?t.bottomLeft=(0,R.jsx)("div",{className:"flex flex-row items-center gap-2 whitespace-nowrap text-sm text-black dark:text-stone-400",children:"Delisted \ud83d\udc8e\u270b"}):("FillCollectionBidEvent"==e.type||"SellEvent"==e.type)&&(t.bottomLeft=(0,R.jsxs)("div",{className:"flex flex-row items-center gap-2 whitespace-nowrap text-sm text-black dark:text-stone-400",children:[(0,R.jsx)(d(),{href:"/u/".concat(e.data.buyer),children:(0,R.jsx)("a",{className:"underline",children:(0,R.jsx)(P.Z,{address:e.data.buyer})})}),(0,R.jsx)("div",{children:"bought for"}),(0,R.jsx)("div",{className:"w-4",children:(0,R.jsx)(g.Z,{})}),(0,R.jsxs)("div",{children:[(0,y.Ho)(e.data.price)," APT"]})]})),H({topLeft:(0,R.jsx)(d(),{href:"/u/".concat(e.data.seller),children:(0,R.jsx)("a",{className:"underline",children:Oe&&Oe===e.data.seller?"You (".concat((0,y.Xn)(e.data.seller),")"):(0,R.jsx)(P.Z,{address:e.data.seller})})}),topRight:"".concat((0,y.VG)(e.timestamp)," ago")},t)}))})]})]})]}),(0,R.jsx)("div",{children:(0,R.jsx)(z,{tokens:X})})]})]})}function V(){var e=(0,u.useRouter)().query,t=e.collectionSlug,r=e.nameEncoded,n=e.propertyVersion,i=decodeURIComponent(r);return(0,R.jsx)(Q,{collectionSlug:t,name:i,propertyVersion:n})}},60931:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/assets/[collectionSlug]/[nameEncoded]/[propertyVersion]",function(){return r(44819)}])}},function(e){e.O(0,[2455,4479,7536,422,8277,289,8032,9774,2888,179],(function(){return t=60931,e(e.s=t);var t}));var t=e.O();_N_E=t}]);